<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profile | Flashcard Revision</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col relative overflow-x-hidden overflow-y-auto">
    <div class="bg-anim-circle bg-anim-blue"></div>
    <div class="bg-anim-circle bg-anim-yellow"></div>

    <header class="bg-white shadow-lg p-4 flex flex-col md:flex-row md:justify-between md:items-center relative z-10 transition-all duration-300">
        <div class="flex flex-col md:flex-row md:items-center w-full">
            <h1 id="subjectTitle" class="text-xl font-bold flex-1 text-center md:text-left text-blue-700">Your Profile
            </h1>
            <nav class="flex flex-wrap justify-center md:justify-end gap-2 mt-2 md:mt-0 w-full md:w-auto">
                <a href="dashboard.html" class="nav-btn nav-btn-dbms">Dashboard</a>
                <a href="leaderboard.html" class="nav-btn nav-btn-dbms">Leaderboard</a>
                <a href="profile.html" class="nav-btn nav-btn-dbms">Profile</a>
            </nav>
            <!-- Logout button removed from here -->
        </div>
    </header>
    <style>
        body {
            background: linear-gradient(120deg, #f8fafc 0%, #e0e7ff 100%);
        }
        
        .bg-anim-circle {
            position: absolute;
            border-radius: 9999px;
            z-index: 0;
        }
        
        .bg-anim-blue {
            top: -60px;
            left: -60px;
            width: 320px;
            height: 320px;
            background: #c7d2fe;
            opacity: 0.25;
            animation: pulse-slow 3.5s ease-in-out infinite;
        }
        
        .bg-anim-yellow {
            bottom: -80px;
            right: -80px;
            width: 400px;
            height: 400px;
            background: #fef9c3;
            opacity: 0.18;
            animation: pulse-slow 3.5s 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse-slow {
            0%,
            100% {
                transform: scale(1);
                opacity: 0.25;
            }
            50% {
                transform: scale(1.12);
                opacity: 0.4;
            }
        }
        
        .nav-btn {
            background: #2563eb;
            color: #fff;
            padding: 0.5em 1.2em;
            border-radius: 8px;
            font-weight: 500;
            transition: background 0.3s, transform 0.3s;
            display: inline-block;
            margin: 0.5em 0;
        }
        
        .nav-btn:hover {
            background: #22d3ee;
            transform: translateY(-2px);
        }
        
        .nav-btn-dbms {
            background: linear-gradient(90deg, #e0e7ff 60%, #c7d2fe 100%);
            color: #1e3a8a;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 2px 8px 0 rgba(80, 80, 160, 0.08);
            padding: 0.5em 1.2em;
            margin: 0.5em 0;
            transition: background 0.3s, color 0.3s, box-shadow 0.3s, transform 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .nav-btn-dbms:hover,
        .nav-btn-dbms:focus {
            background: linear-gradient(90deg, #c7d2fe 60%, #569af8 100%);
            color: #2563eb;
            box-shadow: 0 4px 16px 0 rgba(59, 130, 246, 0.18), 0 2px 8px 0 rgba(59, 130, 246, 0.14);
            transform: translateY(-2px) scale(1.04);
            letter-spacing: 0.5px;
        }
        /* Profile card and effects */
        
        .profile-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1.5em;
            box-shadow: 0 8px 32px 0 rgba(80, 80, 160, 0.13), 0 2px 8px 0 rgba(80, 80, 160, 0.10);
            padding: 2.5em 2em 2em 2em;
            margin-top: 2em;
            position: relative;
            overflow: hidden;
            transition: box-shadow 0.3s, transform 0.3s;
            z-index: 1;
        }
        
        .profile-card:hover {
            box-shadow: 0 16px 48px 0 rgba(80, 80, 160, 0.18), 0 8px 24px 0 rgba(80, 80, 160, 0.14);
            transform: translateY(-8px) scale(1.03);
        }
        
        .profile-glow {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 60px;
            background: radial-gradient(circle, #a5b4fc 0%, transparent 80%);
            opacity: 0.5;
            z-index: 0;
            filter: blur(12px);
        }
        
        .profile-avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #60a5fa;
            box-shadow: 0 2px 12px 0 #60a5fa44;
            margin-bottom: 1em;
            background: #e0e7ff;
            transition: box-shadow 0.3s;
        }
        
        .profile-card:hover .profile-avatar {
            box-shadow: 0 8px 32px 0 #60a5fa55;
        }
        
        .profile-username {
            font-size: 1.5em;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 0.2em;
            letter-spacing: 1px;
        }
        
        .profile-email {
            color: #64748b;
            font-size: 1.1em;
            margin-bottom: 1.2em;
        }
        
        .profile-form label {
            font-weight: 600;
            color: #374151;
        }
        
        .profile-form input {
            background: #f1f5f9;
            border: 1.5px solid #c7d2fe;
            transition: border 0.2s;
        }
        
        .profile-form input:focus {
            border: 1.5px solid #2563eb;
            outline: none;
        }
        
        .profile-form button {
            box-shadow: 0 2px 8px 0 rgba(59, 130, 246, 0.08);
        }
        
        .profile-form button:active {
            transform: scale(0.97);
        }
        
        .progress-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1.5em;
            box-shadow: 0 8px 32px 0 rgba(80, 80, 160, 0.13), 0 2px 8px 0 rgba(80, 80, 160, 0.10);
            padding: 2.5em 2em 2em 2em;
            margin-top: 2em;
            position: relative;
            overflow: hidden;
            transition: box-shadow 0.3s, transform 0.3s;
            z-index: 1;
        }
        
        .progress-section:hover {
            box-shadow: 0 8px 32px 0 rgba(80, 80, 160, 0.13);
            transform: translateY(-4px) scale(1.01);
        }
        
        .progress-section h2 {
            color: #2563eb;
        }
        
        .progress-section ul li {
            margin-bottom: 0.5em;
            font-size: 1.08em;
        }
    </style>

    <main class="flex-grow max-w-4xl mx-auto p-8 mt-6">
        <div class="flex flex-col md:flex-row gap-20 items-start">
            <!-- Progress Section Left -->
            <section class="progress-section profile-card flex-1 max-w-md w-full mt-0 md:mt-0">
                <div class="profile-glow"></div>
                <h2 class="text-xl font-semibold mb-4 text-center">Your Progress Summary</h2>
                <ul id="progressSummary" class="list-disc pl-5 text-gray-700"></ul>
                <!-- Achievements Section -->
                <div class="mt-8 w-full flex flex-col items-center">
                    <div class="text-2xl font-bold text-green-700 mb-2 flex items-center gap-2">Achievements <span>üèÖ</span></div>
                    <div id="achievementsList" class="flex flex-wrap gap-3 justify-center"></div>
                </div>
                <!-- Motivational Quote Card -->
                <div class="mt-8 bg-gradient-to-br from-green-100 via-blue-100 to-yellow-100 rounded-xl shadow-lg p-5 flex flex-col items-center border-2 border-green-200 wow-card animate-fade-in-up">
                    <div class="text-3xl mb-2">üåü</div>
                    <div id="profileMotivation" class="text-base text-green-700 text-center font-semibold"></div>
                </div>
            </section>
            <!-- Profile Card/Form Right -->
            <div class="profile-card flex-1 max-w-md w-full">
                <div class="profile-glow"></div>
                <div class="flex flex-col items-center">
                    <img src="https://api.dicebear.com/7.x/identicon/svg?seed=profile" alt="Avatar" class="profile-avatar" />
                    <div class="profile-username" id="profileUsername"></div>
                    <div class="profile-email" id="profileEmail"></div>
                    <!-- New: Join Date -->
                    <div class="mt-2 text-gray-500 text-sm" id="profileJoinDate"></div>
                </div>
                <form id="profileForm" class="profile-form space-y-6 mt-6">
                    <div>
                        <label for="username" class="block mb-1">Username</label>
                        <input type="text" id="username" name="username" class="w-full border rounded p-2" required />
                    </div>
                    <div>
                        <label for="email" class="block mb-1">Email (read-only)</label>
                        <input type="email" id="email" name="email" class="w-full border rounded p-2 bg-gray-100" readonly />
                    </div>
                    <div class="flex flex-row gap-20 items-center">
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">Save Changes</button>
                        <button type="button" id="logoutBtn" class="bg-red-500 hover:bg-red-600 text-white font-semibold px-4 py-2 rounded transition-colors duration-200">Logout</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script>
        // Load logged-in user from localStorage
        const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
        if (!loggedInUser) {
            alert('Please login first.');
            window.location.href = 'login.html';
        }

        const usernameInput = document.getElementById('username');
        const emailInput = document.getElementById('email');
        const progressSummary = document.getElementById('progressSummary');
        const profileJoinDate = document.getElementById('profileJoinDate');
        const achievementsList = document.getElementById('achievementsList');
        const profileMotivation = document.getElementById('profileMotivation');

        // Prefill form and avatar
        document.getElementById('profileUsername').textContent = loggedInUser.username;
        document.getElementById('profileEmail').textContent = loggedInUser.email;
        usernameInput.value = loggedInUser.username;
        emailInput.value = loggedInUser.email;

        // Display join date
        const joinDate = new Date(loggedInUser.joinDate);
        profileJoinDate.textContent = `Member since ${joinDate.toLocaleString('default', { month: 'long', year: 'numeric' })}`;

        // Save profile changes
        document.getElementById('profileForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const index = users.findIndex(u => u.email === loggedInUser.email);
            if (index !== -1) {
                users[index].username = usernameInput.value.trim();
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('loggedInUser', JSON.stringify(users[index]));
                alert('Profile updated successfully!');
            }
        });

        // Load progress summary
        const progressKey = `progress_${loggedInUser.email}`;
        const progressData = JSON.parse(localStorage.getItem(progressKey)) || {};

        for (const subject in progressData) {
            let totalChaptersReviewed = 0;
            let totalCards = 0;
            for (const chapter in progressData[subject]) {
                totalChaptersReviewed++;
                totalCards += progressData[subject][chapter];
            }
            const li = document.createElement('li');
            li.textContent = `${subject.toUpperCase()}: Reviewed ${totalCards} cards in ${totalChaptersReviewed} chapters`;
            progressSummary.appendChild(li);
        }

        // --- Achievements Section ---
        function renderAchievements() {
            const achievements = [];
            // Example logic: add achievements based on progress
            let totalCards = 0;
            let totalChapters = 0;
            for (const subject in progressData) {
                for (const chapter in progressData[subject]) {
                    totalCards += progressData[subject][chapter];
                    totalChapters++;
                }
            }
            if (totalCards >= 1) achievements.push({
                label: 'First Card Reviewed, True GCOEKin Blood',
                icon: 'üéâ'
            });
            if (totalCards >= 50) achievements.push({
                label: '50 Cards Master',
                icon: 'üèÜ'
            });
            if (totalCards >= 100) achievements.push({
                label: 'Century Club',
                icon: 'üíØ'
            });
            if (totalChapters >= 5) achievements.push({
                label: '5 Chapters Studied',
                icon: 'üìö'
            });
            if (totalChapters >= 10) achievements.push({
                label: '10 Chapters Studied',
                icon: 'üéì'
            });
            if (totalCards === 0) achievements.push({
                label: 'Getting Started!',
                icon: 'üöÄ'
            });
            const achievementsList = document.getElementById('achievementsList');
            achievementsList.innerHTML = '';
            achievements.forEach(a => {
                const div = document.createElement('div');
                div.className = 'bg-white rounded-lg shadow-md p-4 w-full text-center font-semibold text-green-800 border border-green-300 mb-2 flex items-center justify-center gap-2';
                div.innerHTML = `<span class="text-2xl">${a.icon}</span> <span>${a.label}</span>`;
                achievementsList.appendChild(div);
            });
        }
        renderAchievements();
        // --- Motivational Quote Card ---
        const motivationQuotes = [
            "Success is the sum of small efforts, repeated day in and day out.",
            "Don't watch the clock; do what it does. Keep going!",
            "The secret of getting ahead is getting started.",
            "Great things never come from comfort zones.",
            "Push yourself, because no one else is going to do it for you.",
            "Dream it. Wish it. Do it.",
            "Stay positive, work hard, make it happen.",
            "Believe you can and you're halfway there.",
            "Your only limit is your mind.",
            "Little by little, a little becomes a lot."
        ];
        document.getElementById('profileMotivation').textContent = motivationQuotes[Math.floor(Math.random() * motivationQuotes.length)];

        // Logout button
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('loggedInUser');
            window.location.href = 'login.html';
        });
    </script>

</body>

</html>

</html>